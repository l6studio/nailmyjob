# Fetch all secrets from Bitwarden Secrets Manager project
SECRETS=$(kamal secrets fetch --adapter bitwarden-sm "$BWS_PROJECT_ID/all")

# Registry credentials
REGISTRY_USERNAME=$(kamal secrets extract REGISTRY_USERNAME $SECRETS)
REGISTRY_PASSWORD=$(kamal secrets extract REGISTRY_PASSWORD $SECRETS)

# Rails
RAILS_MASTER_KEY=$(kamal secrets extract RAILS_MASTER_KEY $SECRETS)

# Database (use DATABASE_URL for Supabase, or individual vars for local)
DATABASE_URL=$(kamal secrets extract DATABASE_URL $SECRETS)
DATABASE_USERNAME=$(kamal secrets extract DATABASE_USERNAME $SECRETS)
DATABASE_PASSWORD=$(kamal secrets extract DATABASE_PASSWORD $SECRETS)
DATABASE_HOST=$(kamal secrets extract DATABASE_HOST $SECRETS)
DATABASE_PORT=$(kamal secrets extract DATABASE_PORT $SECRETS)
DATABASE_NAME=$(kamal secrets extract DATABASE_NAME $SECRETS)

# Email (Mailgun API)
MAILGUN_API_KEY=$(kamal secrets extract MAILGUN_API_KEY $SECRETS)
MAILGUN_DOMAIN=$(kamal secrets extract MAILGUN_DOMAIN $SECRETS)
MAILER_FROM_ADDRESS=$(kamal secrets extract MAILER_FROM_ADDRESS $SECRETS)

# AI Services (optional)
DEEPGRAM_API_KEY=$(kamal secrets extract DEEPGRAM_API_KEY $SECRETS)
OPENAI_API_KEY=$(kamal secrets extract OPENAI_API_KEY $SECRETS)